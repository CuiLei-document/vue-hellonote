(function(t){function e(e){for(var n,r,a=e[0],u=e[1],c=e[2],d=0,l=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);f&&f(e);while(l.length)l.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],n=!0,r=1;r<o.length;r++){var a=o[r];0!==i[a]&&(n=!1)}n&&(s.splice(e--,1),t=u(u.s=o[0]))}return t}var n={},r={app:0},i={app:0},s=[];function a(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-46e425d2":"b65cb35d","chunk-2d732998":"6f1d064b","chunk-7c2c6694":"d7fb8485","chunk-52dbdc47":"045c759a"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(t){var e=[],o={"chunk-2d732998":1,"chunk-7c2c6694":1,"chunk-52dbdc47":1};r[t]?e.push(r[t]):0!==r[t]&&o[t]&&e.push(r[t]=new Promise((function(e,o){for(var n="css/"+({}[t]||t)+"."+{"chunk-46e425d2":"31d6cfe0","chunk-2d732998":"936d12b5","chunk-7c2c6694":"7e046997","chunk-52dbdc47":"8c981bc8"}[t]+".css",i=u.p+n,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var c=s[a],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===i))return e()}var l=document.getElementsByTagName("style");for(a=0;a<l.length;a++){c=l[a],d=c.getAttribute("data-href");if(d===n||d===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete r[t],f.parentNode.removeChild(f),o(s)},f.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=s);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=a(t);var l=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(f);var o=i[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,o[1](l)}i[t]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,o){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(o,n,function(e){return t[e]}.bind(null,n));return o},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/vue-hellonote/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var f=d;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},2395:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("SideBar"),o("router-view")],1)},i=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"sidebar"},[o("Avatar"),o("div",{staticClass:"icons"},[o("router-link",{attrs:{to:"/note",title:"笔记"}},[o("i",{staticClass:"iconfont icon-note"})]),o("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[o("i",{staticClass:"iconfont icon-notebook"})]),o("router-link",{attrs:{to:"/trash",title:"回收站"}},[o("i",{staticClass:"iconfont icon-trash"})])],1),o("div",{staticClass:"logout"},[o("i",{staticClass:"iconfont icon-logout",on:{click:t.logout}})])],1)},a=[],u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},c=[],d=o("5530"),l=o("5e44"),f=o("2f62"),h={name:"Avatar",data:function(){return{}},computed:Object(d["a"])({},Object(f["c"])(["username","slug"])),methods:Object(d["a"])({},Object(f["b"])(["checkUser"])),created:function(){this.checkUser("/login")}},p=h,g=(o("5b71"),o("2877")),m=Object(g["a"])(p,u,c,!1,null,"f26a310e",null),v=m.exports,b={components:{Avatar:v},name:"SideBar",methods:{logout:function(){var t=this;console.log(1111),this.$store.dispatch("logoutUser").then((function(){t.$router.push("/login"),t.$message.success("注销登录")}))}}},k=b,N=(o("b9d1"),Object(g["a"])(k,s,a,!1,null,"65d8892f",null)),w=N.exports,I={components:{SideBar:w}},E=I,y=(o("7c55"),Object(g["a"])(E,r,i,!1,null,null,null)),O=y.exports,T=o("9483");Object(T["a"])("".concat("/vue-hellonote/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});o("ac1f"),o("d3b7"),o("3ca3"),o("ddb0");var A=o("8c4f"),j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"main"}),o("div",{staticClass:"form"},[o("h3",{on:{click:t.showRegister}},[t._v("创建用户")]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowRegister,expression:"isShowRegister"}],staticClass:"register"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.register.password},on:{input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}})]),o("p",{class:{error:t.register.isError}},[t._v(t._s(t.register.notice))]),o("div",{staticClass:"button",on:{click:t.onRegister}},[t._v("创建账号")])])]),o("h3",{on:{click:t.showLogin}},[t._v("用户登录")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowLogin,expression:"isShowLogin"}],staticClass:"login"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:t.login.username},on:{input:function(e){e.target.composing||t.$set(t.login,"username",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",placeholder:"输入密码"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}})]),o("p",{class:{error:t.login.isError}},[t._v(t._s(t.login.notice))]),o("div",{staticClass:"button",on:{click:t.onLogin}},[t._v("登录")])])],1)])])])])},S=[],C={name:"Login",data:function(){return{isShowRegister:!1,isShowLogin:!0,register:{username:"",password:"",notice:"请输入用户名和密码",isError:!1},login:{username:"hange444",password:"123456",notice:"请输入用户名和密码",isError:!1}}},methods:Object(d["a"])(Object(d["a"])({},Object(f["b"])(["loginUser","registerUser"])),{},{showRegister:function(){this.isShowRegister=!0,this.isShowLogin=!1},showLogin:function(){this.isShowRegister=!1,this.isShowLogin=!0},onRegister:function(){var t=this,e=this.validUsername(this.register.username);if(!e.isValid)return this.register.notice=e.notice,void(this.register.isError=!0);var o=this.validPassword(this.register.password);if(!o.isValid)return this.register.notice=o.notice,void(this.register.isError=!0);this.registerUser({username:this.register.username,password:this.register.password}).then((function(){t.register.iserror=!1,t.register.notice="",t.$router.push({path:"/notebooks"})}))},onLogin:function(){var t=this,e=this.validUsername(this.login.username);if(!e.isValid)return this.login.notice=e.notice,void(this.login.isError=!0);var o=this.validPassword(this.login.password);if(!o.isValid)return this.login.notice=o.notice,void(this.login.isError=!0);this.loginUser({username:this.login.username,password:this.login.password}).then((function(){t.login.iserror=!1,t.login.notice="",t.$router.push({path:"/notebooks"})}))},validUsername:function(t){return{isValid:/^[a-zA-Z_0-9]{3,15}$/.test(t),notice:"请检查您的用户名，6~15个字符，可以是字母、下划线、数字"}},validPassword:function(t){return{isValid:/^[1-9]{6,10}$/.test(t),notice:"请检查您的密码，1-9的数字，6~10位"}}})},P=C,_=(o("dc89"),Object(g["a"])(P,j,S,!1,null,"20862f85",null)),L=_.exports;n["default"].use(A["a"]);var U=A["a"].prototype.replace;A["a"].prototype.replace=function(t){return U.call(this,t).catch((function(t){return t}))};var B=A["a"].prototype.push;A["a"].prototype.push=function(t){return B.call(this,t).catch((function(t){return t}))};var $=[{path:"/",redirect:"/notebooks"},{path:"/login",component:L},{path:"/notebooks",component:function(){return o.e("chunk-52dbdc47").then(o.bind(null,"37cf"))}},{path:"/note",component:function(){return Promise.all([o.e("chunk-46e425d2"),o.e("chunk-7c2c6694")]).then(o.bind(null,"128e"))}},{path:"/trash",component:function(){return Promise.all([o.e("chunk-46e425d2"),o.e("chunk-2d732998")]).then(o.bind(null,"137e"))}}],x=new A["a"]({base:"/vue-hellonote/",routes:$}),R=x,D=(o("9e1f"),o("450d"),o("6ed5")),G=o.n(D),V=(o("0fb7"),o("f529")),M=o.n(V),F=(o("bd49"),o("18ff")),q=o.n(F),H=(o("960d"),o("defb")),J=o.n(H),z=(o("cb70"),o("b370")),K=o.n(z),Z=(o("1951"),o("eedf")),Q=o.n(Z);n["default"].use(Q.a),n["default"].use(K.a),n["default"].use(J.a),n["default"].use(q.a),n["default"].prototype.$message=M.a,n["default"].prototype.$confirm=G.a.confirm,n["default"].prototype.$prompt=G.a.prompt;o("7db0"),o("25f0"),o("4de4"),o("4e82"),o("159b"),o("99af");var W=o("ead7"),X=o("5a0c"),Y=o.n(X);function tt(t){var e=Y()(t),o=Y()();return e.isSame(o,"day")?"今天":e.isSame(o.subtract("1","day"),"day")?"昨天":e.isSame(o.subtract("2","day"),"day")?"前天":void e.format("MM月DD日")}var et={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks",DELETE:"/notebooks"},ot={getAll:function(){return new Promise((function(t,e){Object(W["a"])(et.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt<e.createdAt?1:-1})),e.data.forEach((function(t){t.times=tt(t.createdAt)})),t(e)}))}))},addBook:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,o=void 0===e?"":e;return Object(W["a"])(et.ADD,"post",{title:o})},updateBook:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""},o=e.title,n=void 0===o?"":o;return Object(W["a"])("".concat(et.UPDATE,"/").concat(t),"patch",{title:n})},deleteBook:function(t){return Object(W["a"])("".concat(et.DELETE,"/").concat(t),"delete")}},nt={notebooks:null,currentBookId:null},rt={notebooks:function(t){return t.notebooks||[]},currentBook:function(t){return Array.isArray(t.notebooks)?t.currentBookId?t.notebooks.find((function(e){return e.id.toString()===t.currentBookId.toString()}))||{}:t.notebooks[0]||{}:{}}},it={setNotebooks:function(t,e){t.notebooks=e.notebooks},addNotebook:function(t,e){t.notebooks.unshift(e.notebooks)},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter((function(t){return t.id!==e.notebookId}))},updateNotebook:function(t,e){var o=t.notebooks.find((function(t){return t.id===e.notebookId}))||{};o.title=e.title},setCurrentBook:function(t,e){t.currentBookId=e.currentBookId}},st={getNotebooks:function(t){var e=t.commit,o=t.state;return null!==o.notebooks?Promise.resolve():ot.getAll().then((function(t){e("setNotebooks",{notebooks:t.data})}))},addNotebook:function(t,e){var o=t.commit;return ot.addBook({title:e.title}).then((function(t){o("addNotebook",{notebooks:t.data})}))},deleteNotebook:function(t,e){var o=t.commit;return ot.deleteBook(e.notebookId).then((function(t){o("deleteNotebook",{notebookId:e.notebookId})}))},updateNotebook:function(t,e){var o=t.commit;return ot.updateBook(e.notebookId,{title:e.title}).then((function(t){o("updateNotebook",{notebookId:e.notebookId,title:e.title})}))}},at={state:nt,getters:rt,mutations:it,actions:st},ut={getNote:"/notes/from",addNote:"/notes/to",deleteNote:"/notes",updateNote:"/notes"},ct={getNote:function(t){var e=t.notebookId;return new Promise((function(t,o){Object(W["a"])("".concat(ut.getNote,"/").concat(e),"get").then((function(e){e.data.sort((function(t,e){return t.createdAt>e.createdAt?1:-1})),e.data.forEach((function(t){return t.time=tt(t.createdAt),t})),t(e)}))}))},addNote:function(t){var e=t.notebookId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"新建标题",content:""},n=o.title,r=void 0===n?"":n,i=o.content,s=void 0===i?"":i;return new Promise((function(t,o){Object(W["a"])("".concat(ut.addNote,"/").concat(e),"POST",{title:r,content:s}).then((function(e){e.data.time=tt(e.data.createdAt),e.data.updateTime=tt(e.data.updatedAt),t(e)})).catch((function(t){o(t)}))}))},deleteNote:function(t){var e=t.noteId;return Object(W["a"])("".concat(ut.deleteNote,"/").concat(e),"delete")},updateNote:function(t){var e=t.noteId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},n=o.title,r=void 0===n?"":n,i=o.content,s=void 0===i?"":i;return Object(W["a"])("".concat(ut.updateNote,"/").concat(e),"patch",{title:r,content:s})}},dt={notes:null,currentNoteId:null},lt={notes:function(t){return t.notes||[]},currentNote:function(t){return Array.isArray(t.notes)?t.currentNoteId?t.notes.find((function(e){return e.id.toString()===t.currentNoteId}))||{}:t.notes[0]||{}:{}}},ft={setNote:function(t,e){t.notes=e.notes},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var o=t.notes.find((function(t){return t.id===e.id}))||{};o.title=e.title,o.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter((function(t){return t.id!==e.noteId}))},setCurrentNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.currentNoteId=e.currentNoteId}},ht={getNotes:function(t,e){var o=t.commit,n=e.notebookId;return ct.getNote({notebookId:n}).then((function(t){o("setNote",{notes:t.data})}))},addNote:function(t,e){var o=t.commit,n=e.notebookId,r=(e.title,e.content);return ct.addNote({notebookId:n},{title:"新建标题",content:r}).then((function(t){o("addNote",{note:t.data})}))},updateNote:function(t,e){var o=t.commit,n=e.noteId,r=e.title,i=e.content;return ct.updateNote({noteId:n},{title:r,content:i}).then((function(t){o("updateNote",{noteId:n,title:r,content:i})}))},deleteNote:function(t,e){var o=t.commit,n=e.noteId;return ct.deleteNote({noteId:n}).then((function(t){o("deleteNote",{noteId:n})}))}},pt={state:dt,getters:lt,mutations:ft,actions:ht},gt={user:null},mt={username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"未":t.user.username[0].toUpperCase()}},vt={setUser:function(t,e){t.user=e.user}},bt={loginUser:function(t,e){var o=t.commit,n=t.state,r=e.username,i=e.password;return null!==n.user?Promise.resolve():l["a"].login(r,i).then((function(t){o("setUser",{user:t.data})}))},registerUser:function(t,e){var o=t.commit,n=e.username,r=e.password;return l["a"].register(n,r).then((function(t){o("setUser",{user:t.data})}))},checkUser:function(t,e){var o=t.commit;return l["a"].getInfo().then((function(t){t.isLogin?o("setUser",{user:t.data}):R.push(e)}))},logoutUser:function(t){var e=t.commit;return l["a"].logout().then((function(t){e("setUser",{user:null})}))}},kt={state:gt,getters:mt,mutations:vt,actions:bt},Nt=(o("5319"),{GET:"/notes/trash",DELETE:"/notes/:noteId/confirm",REVERT:"/notes/:noteId/revert"}),wt={getAll:function(){return new Promise((function(t,e){Object(W["a"])(Nt.GET,"get").then((function(e){e.data=e.data.sort((function(t,e){return t.createdAt-e.createdAt?1:-1})),e.data.forEach((function(t){t.createdAtBeautify=tt(t.createdAt),t.updatedAtBeautify=tt(t.updatedAt)})),t(e)}))}))},revertNote:function(t){var e=t.noteId;return Object(W["a"])(Nt.REVERT.replace(":noteId",e),"PATCH")},deleteNote:function(t){var e=t.noteId;return Object(W["a"])(Nt.DELETE.replace(":noteId",e),"DELETE")}},It={trashNotes:null,currentTrashId:null},Et={trashNotes:function(t){return t.trashNotes||[]},currentTrash:function(t,e){return t.currentTrashId?t.trashNotes.find((function(e){return e.id.toString()===t.currentTrashId.toString()}))||{}:e.trashNotes[0]||{}},bookTo:function(t,e,o,n){console.log("rootState",o),console.log("rootGetters",n);var r=n.notebooks.find((function(t){return t.id===e.currentTrash.notebookId}))||{};return r.title||""}},yt={setTrashNote:function(t,e){t.trashNotes=e.trashNotes,console.log(t.trashNotes)},addTrashNote:function(){},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter((function(t){return t.id!==e.noteId})),console.log(t.trashNotes)},setCurrentTrash:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.currentTrashId=e.noteId}},Ot={getTrashNote:function(t){var e=t.commit;return wt.getAll().then((function(t){e("setTrashNote",{trashNotes:t.data})}))},revertTrashNote:function(t,e){var o=t.commit,n=e.noteId;return wt.revertNote({noteId:n}).then((function(t){o("deleteTrashNote",{noteId:n})}))},deleteTrashNote:function(t,e){var o=t.commit,n=e.noteId;return wt.deleteNote({noteId:n}).then((function(t){o("deleteTrashNote",{noteId:n})}))}},Tt={state:It,getters:Et,mutations:yt,actions:Ot};n["default"].use(f["a"]);var At=new f["a"].Store({store:{},mutations:{},actions:{},getters:{},modules:{notebooks:at,notes:pt,user:kt,trash:Tt}}),jt=At;n["default"].config.productionTip=!1,n["default"].prototype.$eventBus=new n["default"],new n["default"]({router:R,store:jt,render:function(t){return t(O)}}).$mount("#app")},"5a78":function(t,e,o){},"5b71":function(t,e,o){"use strict";o("a572")},"5e44":function(t,e,o){"use strict";var n=o("ead7"),r={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"},i={register:function(t,e){return Object(n["a"])(r.REGISTER,"post",{username:t,password:e})},login:function(t,e){return Object(n["a"])(r.LOGIN,"post",{username:t,password:e})},logout:function(){return Object(n["a"])(r.LOGOUT)},getInfo:function(){return Object(n["a"])(r.GET_INFO)}};e["a"]=i},"7c55":function(t,e,o){"use strict";o("2395")},a572:function(t,e,o){},b9d1:function(t,e,o){"use strict";o("5a78")},beb5:function(t,e,o){},dc89:function(t,e,o){"use strict";o("beb5")},ead7:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));o("d3b7");var n=o("bc3a"),r=o.n(n);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,i){var s={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?s.props=o:s.data=o,r()(s).then((function(t){200===t.status?n(t.data):(console.error(t.data),i(t.data))})).catch((function(t){console.error({msg:"获取数据失败"}),i(t)}))}))}r.a.defaults.baseURL="https://note-server.hunger-valley.com/",r.a.defaults.timeout=3e3,r.a.defaults.withCredentials=!0}});
//# sourceMappingURL=app.162990e4.js.map